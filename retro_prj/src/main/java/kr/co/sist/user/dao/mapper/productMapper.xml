<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user.product">

	<!-- 카테고리 조회 조회 -->
	<insert id="insertProduct" parameterType="pVO">
		insert into PRODUCT (PCODE, PNAME, CONTEXT, IMG, 
			<if test="img2 neq null and img2 neq ''">
	 		IMG2,
	 		</if>
	 		<if test="img3 neq null and img3 neq ''">
	 		IMG3,
	 		</if>
	 		<if test="img4 neq null and img4 neq ''">
	 		IMG4,
	 		</if>
	 		<if test="img5 neq null and img5 neq ''">
	 		IMG5,
	 		</if>
		PRICE, INPUT_DATE, DELIVER, STATUS, LOC, PCANCEL, C3CODE, ID)
 		values ('P' || lpad(pcode_seq.nextval, 5, 0),#{pname},#{context},#{img},
 		
	 		<if test="img2 neq null and img2 neq ''">
	 		#{img2},
	 		</if>
	 		<if test="img3 neq null and img3 neq ''">
	 		#{img3},
	 		</if>
	 		<if test="img4 neq null and img4 neq ''">
	 		#{img4},
	 		</if>
	 		<if test="img5 neq null and img5 neq ''">
	 		#{img5},
	 		</if>
 		#{price},sysdate ,#{deliver},#{status},#{loc},'N',
 		#{c3code},#{id})
	</insert>

	<select id="selectProduct" resultType="pd" parameterType="pVO">
		select  PCODE, PNAME, CONTEXT, IMG, 
				<if test="img2 neq null and img2 neq ''">
		 		IMG2,
		 		</if>
		 		<if test="img3 neq null and img3 neq ''">
		 		IMG3,
		 		</if>
		 		<if test="img4 neq null and img4 neq ''">
		 		IMG4,
		 		</if>
		 		<if test="img5 neq null and img5 neq ''">
		 		IMG5,
		 		</if>
				PRICE, INPUT_DATE, DELIVER, STATUS, LOC, PCANCEL, C3CODE, ID
		from PRODUCT
		where ID=#{id} and PCODE=#{pcode}
	
		</select>
	
	
	<update id="updateProduct" parameterType="pVO">
	update PRODUCT
	set  
			<if test="pname neq null and pname neq ''">
	 		PNAME=#{pname},
	 		</if>
	 		<if test="context neq null and context neq ''">
	 		CONTEXT=#{context},
	 		</if>
	 		<if test="img4 neq null and img4 neq ''">
	 		IMG=#{img},
	 		</if>
			<if test="img2 neq null and img2 neq ''">
	 		IMG2=#{img2},
	 		</if>
	 		<if test="img3 neq null and img3 neq ''">
	 		IMG3=#{img3},
	 		</if>
	 		<if test="img4 neq null and img4 neq ''">
	 		IMG4=#{img4},
	 		</if>
	 		<if test="img5 neq null and img5 neq ''">
	 		IMG5=#{img5},
	 		</if>
	 		<if test="price neq null and price neq ''">
	 		PRICE=#{price},
	 		</if>
	 		<if test="deliver neq null and deliver neq ''">
	 		DELIVER=#{deliver},
	 		</if>
	 		<if test="status neq null and status neq ''">
	 		STATUS=#{status},
	 		</if>
			<if test="loc neq null and loc neq ''">
	 		LOC=#{loc},
	 		</if>
	 		<if test="c3code neq null and c3code neq ''">
	 		C3CODE=#{c3code}
	 		</if>
	where PCODE=#{pcode}
	</update>
	
	
	<delete id="deleteProduct" parameterType="pVO">
		delete from PRODUCT where PCODE=#{pcode}
	</delete>
	

</mapper>
