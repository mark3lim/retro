<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.sist.login">
	<!-- 컬럼 하나, 행 하나 조회 : dept테이블에서 부서번호를 받아 부서명을 조회 -->
	<select id="selectLogin" resultType="ld" parameterType="lVO">
	select id,nickname 
	from member
	where id = #{id} and pw = #{pw}
	</select>
	<select id="selectId" resultType="ld" parameterType="lVO">
	select (substr(id,1,5)||lpad('*',length(id)-5,'*'))id
	from member 
	where phone=#{phone} and email=#{email}
	</select>
	<select id="selectRandomPw" resultType="ld" parameterType="lVO">
	select dbms_random.string('x',8) pw
	from member 
	where id= #{id} and email= #{email} 
	</select>
	
	<update id="updateTempPw"  parameterType="lVO">
	update member set pw=#{pw} where id =#{id} 
	</update>
</mapper>